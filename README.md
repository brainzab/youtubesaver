# YouTube Downloader Telegram Bot

Телеграм-бот для скачивания видео с YouTube. Бот позволяет скачивать видео в разных разрешениях (480p, 720p, 1080p) или в формате MP3, загружает их на MEGA и предоставляет временную ссылку пользователю.

## Особенности

- Скачивание видео с YouTube в разрешениях 480p, 720p, 1080p
- Извлечение аудио в формате MP3
- Загрузка файлов на MEGA
- Автоматическое удаление файлов через 1 час
- Статистика использования для администратора
- Хранение данных в PostgreSQL

## Требования

- Python 3.8+
- Аккаунт Telegram
- Аккаунт MEGA
- PostgreSQL

## Установка и запуск локально

1. Клонируйте репозиторий:
```
git clone https://github.com/username/youtube-downloader-bot.git
cd youtube-downloader-bot
```

2. Установите зависимости:
```
pip install -r requirements.txt
```

3. Создайте файл `.env` и заполните его, используя `.env.example` как шаблон:
```
TELEGRAM_BOT_TOKEN=your_telegram_bot_token
MEGA_EMAIL=your_mega_email
MEGA_PASSWORD=your_mega_password
DATABASE_URL=postgresql://username:password@localhost:5432/youtube_downloader
ADMIN_USER_ID=your_telegram_user_id
```

4. Запустите бота:
```
python bot.py
```

## Деплой на Railway

### Шаг 1: Подготовка проекта

1. Убедитесь, что у вас есть аккаунт на [Railway](https://railway.app/)
2. Создайте репозиторий на GitHub и загрузите код бота

### Шаг 2: Создание нового проекта в Railway

1. Войдите в аккаунт Railway
2. Нажмите "New Project"
3. Сначала создайте сервис PostgreSQL: выберите "Provision PostgreSQL"
4. Затем создайте сервис из GitHub: выберите "Deploy from GitHub repo"
5. Подключите свой GitHub аккаунт и выберите репозиторий с ботом

### Шаг 3: Настройка переменных окружения

1. В панели управления проектом перейдите во вкладку "Variables"
2. Добавьте следующие переменные:
   - `TELEGRAM_BOT_TOKEN` - токен бота, полученный от BotFather
   - `MEGA_EMAIL` - email аккаунта MEGA
   - `MEGA_PASSWORD` - пароль аккаунта MEGA
   - `ADMIN_USER_ID` - ваш Telegram ID (для доступа к статистике)
3. Переменная `DATABASE_URL` должна быть автоматически добавлена при создании PostgreSQL сервиса

### Шаг 4: Развертывание бота

1. Railway автоматически развернет ваш бот после настройки переменных окружения
2. Проверьте статус развертывания во вкладке "Deployments"
3. После успешного развертывания ваш бот будет запущен и готов к использованию

## Использование бота

1. Найдите своего бота в Telegram по имени
2. Отправьте команду `/start` для начала работы
3. Отправьте ссылку на видео YouTube, которое хотите скачать
4. Выберите качество видео (480p, 720p, 1080p) или MP3
5. Дождитесь завершения загрузки и получите временную ссылку на скачивание

## Команды бота

- `/start` - Начало работы с ботом
- `/help` - Показать справку
- `/stats` - Показать статистику (только для администратора)

## Примечания

- Ссылки на скачивание действительны в течение 1 часа
- Файлы на MEGA удаляются автоматически через 1 час
- Для хранения файлов используется временная папка на MEGA
- База данных PostgreSQL автоматически создаст необходимые таблицы при первом запуске

## Лицензия

MIT 